<?php

	function paramTranslate($value)
	{
		if (is_array($value)) {
			return 'Array';
		}

		return $value;
	}

	function methodVisibility($method)
	{
		if ($method->isPublic()) return 'public';
		if ($method->isProtected()) return 'protected';
		if ($method->isPrivate()) return 'private';

		return 'unknown';
	}
	
	use \Nerd\Design\Architectural\MVC\View;
?>
<!doctype html>
<html class="no-js">
<head>
	<meta charset="utf-8">
	<title><?= $class->getName() ?> Class &mdash; Nerd Documentation</title>
	<link type="text/css" rel="stylesheet" href="/assets/css/style.css" media="all" />
	<style type="text/css">
		@import url(http://fonts.googleapis.com/css?family=Lato);
		body { padding: 15px; text-align: center; background: #e2e2e2; font: normal normal normal 14px/1.253 Lato, sans-serif; }
		h2, h3, h4 { margin-top: 10px; }
		#container { width: 960px; margin: 0 auto; text-align: left }
		#description, #info {margin: 15px 0; padding: 15px; background: white; height: 200px; max-height: 200px; overflow-y: scroll}
		#description { float: left; width: 45% }
		#info { float: right; width: 47% }
		#methods { background: white  }
		#methods section { border-bottom: 1px solid #ccc; padding: 15px; }
		#methods footer p { text-align: right }
		#methods footer a { margin-left: 12px }
		h1 { text-align: left }
		h1 em { text-decoration: underline; font-style: normal }
		h3 span { font-weight: normal; font-style: oblique }
		table { border: 1px solid black; width: 100%; }
		th { text-align: right; vertical-align: top; border-right: 1px solid black }
		thead th { text-align: left }
		td.params { background: #ccc }
		td > table { background: white; width: 100% }
		td > table td { border-right: 1px solid black }
		th, td { border-bottom: 1px solid black; padding: 3px 6px; }
		nav { background: #ccc; padding: 15px }
		nav > ul li { float: left }
		nav a { padding: 0 12px; }
		pre { background: #e2e2e2; padding: 15px; overflow: auto; font-size: 12px }
		
		/* Style only */
		#methods, #description, #info, nav { border-radius: 9px }
		pre, table { border-radius: 6px }
	</style>
</head>
<body>

<div id="container">
<header>
	<h1>Nerd Documentation</h1>
</header>

<article id="<?= strtolower($class->getShortName()) ?>">
	<section id="description">
		<h2><?= $class->getDocblock()->getShortDescription() ?></h2>
		<p><strong>Namespace:</strong> <?= $class->getNamespaceName() ?></p>
		<?= $md->transformMarkdown($class->getDocblock()->getLongDescription()) ?>
	</section>

	<section id="info">
		<h2>Class Info</h2>
		<ul>
<?php $class->getDocblock()->getTags()->each(function($tag) {
	echo "\t\t\t<li>".ucfirst($tag->getName()).': '.$tag->getDescription().'</li>';
}); ?>
		</ul>
	</section>

	<div class="clearfix"></div>

	<section id="methods">
	<?php foreach ($class->getMethods() as $method) : ?>
		<?= (new View('method',['method' => $method, 'md' => $md]))->render() ?>	
	<?php endforeach ?> 
	</section>
</article>

<footer>
	<p>
		Documentation generated by <a href="http://atomphp.com">Nerd</a> <?= \Nerd\Version::FULL ?>.
	</p>
</footer>

</div>

</body>
</html>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script type="text/javascript">
	$(document).ready(function()
	{
		$('footer pre').hide();

		$('footer a').click(function(event)
		{
			event.preventDefault();

			a   = $(this);
			pre = a.parent().parent().children('pre')

			if(pre.data('state') == null)
			{
				pre.data('state', 'closed');
			}

			if(pre.data('state') == 'closed')
			{
				a.text('hide source');
				pre.data('state', 'opened');
				pre.slideDown();
			}
			else
			{
				a.text('show source');
				pre.data('state', 'closed');
				pre.slideUp();
			}
		});
	});
</script>
